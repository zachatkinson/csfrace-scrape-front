---
/**
 * JobModal - SOLID Component Implementation
 * Single Responsibility: Render job detail modal with proper accessibility
 * Following Astro MCP best practices with Islands Architecture
 */

// =============================================================================
// IMPORTS & TYPES
// =============================================================================
import type { IJobModalProps } from '../types/dashboard.types';
import { DASHBOARD_CSS_CLASSES } from '../types/dashboard.types';
import IconClose from '../../icons/IconClose.astro';

// =============================================================================
// COMPONENT PROPS
// =============================================================================
export interface Props extends IJobModalProps {}

const {
  isOpen = false,
  jobId,
  onClose
} = Astro.props;

// =============================================================================
// SERVER-SIDE LOGIC
// =============================================================================

// Modal visibility classes
const modalClasses = `${DASHBOARD_CSS_CLASSES.MODAL_OVERLAY} ${isOpen ? '' : 'hidden'}`;
---

<!-- =============================================================================
     JOB DETAIL MODAL (Single Responsibility - SOLID Architecture)
     Following Astro Islands best practices with data attributes
     ============================================================================= -->

<div 
  id="job-modal" 
  class={modalClasses}
  data-component="job-modal"
  data-modal-open={isOpen}
  data-job-id={jobId}
  role="dialog"
  aria-modal="true"
  aria-labelledby="modal-title"
  aria-describedby="modal-description"
>
  <div class={DASHBOARD_CSS_CLASSES.MODAL_CONTAINER}>
    <div class={DASHBOARD_CSS_CLASSES.MODAL_CONTENT}>
      
      <!-- =============================================================
           MODAL HEADER (Single Responsibility)
           ============================================================= -->
      <div class="flex items-center justify-between mb-6">
        <h2 
          id="modal-title" 
          class="text-2xl font-bold text-white"
        >
          Job Details
        </h2>
        
        <button 
          id="close-modal" 
          class="glass-button p-2 text-white/90 hover:text-white"
          aria-label="Close modal"
          data-action="close-modal"
          type="button"
        >
          <IconClose />
        </button>
      </div>
      
      <!-- =============================================================
           MODAL CONTENT (Single Responsibility)
           ============================================================= -->
      <div 
        id="job-details-content"
        data-job-content
        aria-live="polite"
        aria-busy="false"
      >
        <!-- Job details will be populated by DashboardManager -->
        <div class="text-center py-8" data-loading-placeholder>
          <div class={DASHBOARD_CSS_CLASSES.LOADING_SPINNER + " mx-auto mb-4"}></div>
          <p class="text-white/70">Loading job details...</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- =============================================================================
     MODAL SCRIPT (Astro Islands Architecture)
     No define:vars - using data attributes instead
     ============================================================================= -->
<script src="../scripts/modal-manager.ts"></script>