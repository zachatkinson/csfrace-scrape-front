---
/**
 * Sign In Button Component - Following Astro Best Practices
 * Server-side rendered component with client-side enhancement via custom element
 * Uses data attributes instead of define:vars (Astro recommendation)
 * Single Responsibility: Handles sign-in button UI and interactions
 */
---

<!-- Custom element wrapper with data attributes (Astro best practice) -->
<sign-in-button>
  <!-- Auth Button (Sign In) -->
  <button
    id="auth-toggle"
    class="glass-button px-4 py-2 text-blue-400 hover:text-blue-300 border border-blue-500/30 hover:border-blue-500/50 transition-all duration-200 flex items-center space-x-2"
    aria-label="Sign In"
  >
    <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
    </svg>
    <span>Sign In</span>
  </button>
</sign-in-button>

<script type="module">
  // Custom element following Astro best practices
  // This script is bundled, optimized, and deduplicated by Astro
  import { SignInButtonManager } from '/src/scripts/signInButtonManager';
  
  class SignInButton extends HTMLElement {
    constructor() {
      super();
      this.signInButtonManager = null;
    }

    connectedCallback() {
      // Initialize sign-in button manager
      this.signInButtonManager = new SignInButtonManager({
        container: this,
        onButtonClick: () => {
          // Handle button click events
          console.log('Sign-in button clicked');
        }
      });

      // Initialize the sign-in functionality
      this.signInButtonManager.init();
    }

    disconnectedCallback() {
      // Cleanup when element is removed
      this.signInButtonManager = null;
    }

    // Public method for external control
    triggerSignIn() {
      this.signInButtonManager?.triggerSignIn();
    }
  }
  
  // Define the custom element
  customElements.define('sign-in-button', SignInButton);
</script>