---
// =============================================================================
// GRAFANA HEALTH CARD - SERVER ISLAND (DRY/SOLID)
// =============================================================================
// Single Responsibility: Grafana service health checking and display
// Uses shared service checkers - no duplicate logic!
// =============================================================================

import { GrafanaServiceChecker } from '../../utils/serviceCheckers.ts';
import BaseHealthCard from './BaseHealthCard.astro';

// Server-side health check using shared service checker (DRY principle)
const serviceResult = await GrafanaServiceChecker.checkHealth();

// Grafana-specific metrics for display
const details = [
  { label: 'Dashboards', value: Number(serviceResult.metrics.dashboards) || 0, key: 'dashboards' },
  { label: 'Datasources', value: Number(serviceResult.metrics.datasources) || 0, key: 'datasources' },
  { label: 'Alerts', value: Number(serviceResult.metrics.alerts) || 0, key: 'alerts' },
  { label: 'Users', value: Number(serviceResult.metrics.users) || 1, key: 'users' }
];
---

<!-- Server Island: Grafana Health Card -->
<BaseHealthCard 
  serviceName="Grafana"
  serviceResult={serviceResult}
  icon="ðŸ“ˆ"
  details={details}
/>